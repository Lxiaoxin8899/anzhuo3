⚠️ 本文描述的是生产投料阶段内容，已归档，仅供参考。

# SmartDosing 智能投料系统 Web后台管理系统

## 系统概览

SmartDosing Web后台管理系统是一个基于Android平板的轻量化web服务器解决方案，允许您通过任何设备的浏览器远程管理配方和监控投料操作。

## 核心特性

### 🌐 轻量化Web服务器
- 基于Ktor框架，性能优异
- 响应式设计，支持各种设备访问
- 无需外部服务器，平板即服务器

### 📝 配方管理
- **配方创建**：支持多种材料的配方创建
- **配方编辑**：实时编辑配方信息和材料清单
- **配方分类**：按照香精、酸类、甜味剂等分类管理
- **搜索功能**：支持配方名称和材料名称搜索

### 📊 数据导入导出
- **JSON格式导入**：结构化数据批量导入
- **CSV格式导入**：Excel兼容的批量导入
- **配方预览**：导入前预览配方内容
- **批量操作**：一次性导入多个配方

### 📈 统计分析
- **使用统计**：配方使用频率分析
- **分类分布**：配方分类分布图表
- **热门配方**：最受欢迎配方排行
- **最近使用**：最近使用的配方记录

## 系统架构

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Web浏览器     │◄───┤   网络连接        │◄───┤   Android平板    │
│   (PC/手机)     │    │   WiFi/以太网     │    │   Ktor服务器     │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                                                         │
                                                         ▼
                                               ┌─────────────────┐
                                               │   配方数据库     │
                                               │   (内存存储)     │
                                               └─────────────────┘
```

## 快速开始

### 1. 启动Web服务

启动SmartDosing应用后，系统会自动启动Web服务器：

1. 应用启动时显示服务器地址，例如：`http://192.168.1.100:8080`
2. 在设置页面可以查看和管理Web服务状态
3. 可以复制服务器地址到其他设备访问

### 2. 访问Web界面

在任何连接到同一网络的设备上：

1. 打开浏览器
2. 输入显示的服务器地址
3. 即可访问管理界面

### 3. 网络配置

确保设备连接到同一网络：
- **WiFi网络**：所有设备连接到同一WiFi
- **有线网络**：使用交换机或路由器连接
- **热点模式**：平板开启热点，其他设备连接

## 功能详解

### 📱 主界面

访问根地址显示仪表盘：
- 系统状态概览
- 快速统计信息
- 功能导航菜单
- 设备连接状态

### 📝 配方管理 (`/recipes`)

#### 配方列表
- 展示所有配方信息
- 支持分类筛选
- 实时搜索功能
- 批量操作支持

#### 配方详情
- 完整配方信息展示
- 材料清单和比例
- 使用历史记录
- 快速操作按钮

#### 配方操作
- **查看详情**：查看完整配方信息
- **开始投料**：标记配方开始使用
- **编辑配方**：修改配方内容
- **删除配方**：移除配方（需确认）

### ➕ 配方导入 (`/import`)

#### 单个配方创建
1. 填写配方基本信息
2. 添加材料清单
3. 设置材料重量和顺序
4. 预览配方内容
5. 保存配方

#### 批量导入

**JSON格式示例：**
```json
[
  {
    "name": "苹果香精配方",
    "category": "香精",
    "description": "经典苹果香味配方",
    "materials": [
      {"name": "苹果香精", "weight": 50, "unit": "g", "sequence": 1},
      {"name": "乙基麦芽酚", "weight": 10, "unit": "g", "sequence": 2}
    ]
  }
]
```

**CSV格式示例：**
```csv
配方名称,分类,描述,材料1名称:重量:单位:序号,材料2名称:重量:单位:序号
苹果香精配方,香精,经典苹果香味,苹果香精:50:g:1,乙基麦芽酚:10:g:2
```

### 📊 统计分析 (`/stats`)

#### 概览统计
- 总配方数量
- 配方分类统计
- 使用频率统计
- 最近使用记录

#### 图表分析
- **分类分布图**：各类别配方比例
- **使用排行榜**：最常用配方排名
- **时间分析**：使用时间趋势

### ⚙️ API接口

系统提供完整的REST API接口：

#### 配方相关
- `GET /api/recipes` - 获取配方列表
- `GET /api/recipes/{id}` - 获取配方详情
- `POST /api/recipes` - 创建新配方
- `PUT /api/recipes/{id}` - 更新配方
- `DELETE /api/recipes/{id}` - 删除配方
- `POST /api/recipes/{id}/use` - 标记配方使用

#### 统计相关
- `GET /api/stats` - 获取统计数据

## 技术参数

### 系统要求
- Android 8.0+ (API Level 26+)
- 1GB RAM以上
- WiFi或以太网连接

### 性能指标
- 启动时间：< 5秒
- 响应时间：< 500ms
- 并发用户：支持10+
- 数据容量：1000+配方

### 网络配置
- 默认端口：8080
- 协议：HTTP/1.1
- 支持CORS跨域
- 自动IP地址检测

## 故障排除

### 常见问题

#### 1. 无法访问Web界面
**症状**：浏览器显示"无法连接"
**解决方案**：
- 检查设备是否在同一网络
- 确认IP地址是否正确
- 检查防火墙设置
- 重启Web服务

#### 2. Web服务启动失败
**症状**：应用显示"启动失败"
**解决方案**：
- 检查网络权限
- 重启应用
- 更换端口号
- 检查网络连接

#### 3. 配方数据丢失
**症状**：重启后配方消失
**解决方案**：
- 使用数据备份功能
- 重新导入配方数据
- 检查存储权限

### 网络诊断

#### IP地址检查
1. 打开设置页面
2. 查看"设备IP"信息
3. 确认IP地址有效

#### 端口检查
1. 默认使用8080端口
2. 如冲突可更改端口
3. 重启服务使配置生效

## 安全注意事项

### 网络安全
- 仅在信任的网络中使用
- 建议使用专用网络
- 定期更新系统

### 数据安全
- 定期备份配方数据
- 避免在公共网络使用
- 保护设备物理安全

## 最佳实践

### 部署建议
1. **固定IP**：为平板设置固定IP地址
2. **网络优化**：使用高质量WiFi设备
3. **设备管理**：定期清理系统缓存
4. **数据备份**：定期导出配方数据

### 使用建议
1. **浏览器选择**：推荐使用Chrome、Firefox
2. **网络环境**：确保网络稳定
3. **数据输入**：使用批量导入提高效率
4. **定期维护**：清理无用配方数据

## 技术支持

如需技术支持，请联系：
- 邮箱：smartdosing@example.com
- 电话：400-000-0000
- 在线支持：访问官方网站

## 更新日志

### v1.0.0 (2024-01-15)
- 初始版本发布
- Web服务器基础功能
- 配方管理系统
- 数据导入导出
- 统计分析功能

---

*SmartDosing Web后台管理系统 - 让配方管理更简单、更智能*